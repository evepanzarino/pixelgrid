(()=>{"use strict";const a=window.wp.i18n;let r=function(a){return a.DEFAULT="default",a.PORTRAIT="portrait",a.LANDSCAPE="landscape",a.LINE="line",a}({}),t=function(a){return a.GROUP="gravatar/block-group",a.IMAGE="gravatar/block-image",a.NAME="gravatar/block-name",a.PARAGRAPH="gravatar/block-paragraph",a.LINK="gravatar/block-link",a}({}),e=function(a){return a.AVATAR="avatar",a.DISPLAY_NAME="displayName",a.JOB="job",a.COMPANY="company",a.LOCATION="location",a.DESCRIPTION="description",a.GRAVATAR="gravatar",a.VIEW_PROFILE="viewProfile",a.HEADER="header",a.JOB_COMPANY_LOCATION_WRAPPER="jobCompanyLocationWrapper",a.JOB_COMPANY_WRAPPER="jobCompanyWrapper",a.FOOTER="footer",a.VERIFIED_ACCOUNTS="verifiedAccounts",a}({});function n(a){var r,t,e="";if("string"==typeof a||"number"==typeof a)e+=a;else if("object"==typeof a)if(Array.isArray(a)){var l=a.length;for(r=0;r<l;r++)a[r]&&(t=n(a[r]))&&(e&&(e+=" "),e+=t)}else for(t in a)a[t]&&(e&&(e+=" "),e+=t);return e}const l=function(){for(var a,r,t=0,e="",l=arguments.length;t<l;t++)(a=arguments[t])&&(r=n(a))&&(e&&(e+=" "),e+=r);return e},i=window.wp.url;function o({linkUrl:a,children:r,...t}){const e=Object.entries(t).map((([a,r])=>`${a}="${r}"`)).join(" ");return r=Array.isArray(r)?r.join(""):r,a?`<a href="${a}" ${e} target="_blank">${r}</a>`:`<div ${e}>${r}</div>`}const c=window.wp.escapeHtml;function s(a,r,e,n,i){if(e[r])return"";let s=[];if(Array.isArray(i)&&(s=i.filter(Boolean),!s.length))return"";switch(a){case t.GROUP:return function({linkUrl:a,verticalAlignment:r,className:t},e){return o({linkUrl:a,class:l("gravatar-block__child","gravatar-block-group",{"gravatar-block-group--vertical-alignment":r},t),children:e})}(n,s);case t.IMAGE:return function({linkUrl:a,imageUrl:r,imageWidth:t,imageHeight:e,imageAlt:n,className:i}){return o({linkUrl:a,class:l("gravatar-block__child","gravatar-block-image",i),children:`<img class="gravatar-block-image__image" src="${r}" width="${t}" height="${e}" alt="${(0,c.escapeAttribute)(n)}"/>`})}(n);case t.NAME:return function({linkUrl:a,text:r,className:t}){return o({linkUrl:a,class:l("gravatar-block__child","gravatar-block-name",t),children:`<h4 class="gravatar-block-name__text">${(0,c.escapeHTML)(r)}</h4>`})}(n);case t.PARAGRAPH:return function({linkUrl:a,text:r,className:t}){return o({linkUrl:a,class:l("gravatar-block__child","gravatar-block-paragraph",t),children:`<p class="gravatar-block-paragraph__text">${(0,c.escapeHTML)(r)}</p>`})}(n);case t.LINK:return function({linkUrl:a,text:r,className:t}){return`\n\t\t<a\n\t\t\tclass="${l("gravatar-block__child","gravatar-block-link",t)}"\n\t\t\thref="${a}"\n\t\t\ttarget="_blank"\n\t\t>\n\t\t\t${(0,c.escapeHTML)(r)}\n\t\t</a>\n\t`}(n);default:return""}}function g(a,r,n,i,o={linkToProfile:!0}){return s(t.IMAGE,e.AVATAR,r,{className:l("gravatar-block-image--avatar",o.className),linkUrl:o.linkToProfile?a.profile_url:"",imageUrl:a.avatar_url||"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTQwIiBoZWlnaHQ9IjU0MCIgdmlld0JveD0iMCAwIDU0MCA1NDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSI1NDAiIGhlaWdodD0iNTQwIiBmaWxsPSIjRTJFMkUyIi8+CjxsaW5lIHgxPSIzLjM1MzU1IiB5MT0iMi42NDY0NSIgeDI9IjUzNy4zNTQiIHkyPSI1MzYuNjQ2IiBzdHJva2U9IiNDOUM5QzkiLz4KPC9zdmc+Cg==",imageWidth:n,imageHeight:i,imageAlt:a.avatar_alt_text||a.display_name})}function u(a,r,n={}){return a.display_name?s(t.NAME,e.DISPLAY_NAME,r,{className:l("gravatar-text-truncate-2-lines",n.className),linkUrl:n.linkToProfile?a.profile_url:"",text:a.display_name}):""}function v(a,r,n={}){return a.job_title?s(t.PARAGRAPH,e.JOB,r,{className:l("gravatar-block-paragraph--job gravatar-text-truncate-1-line",n.className),linkUrl:n.linkToProfile?a.profile_url:"",text:a.job_title}):""}function d(a,r,n={}){return a.company?s(t.PARAGRAPH,e.COMPANY,r,{className:l("gravatar-block-paragraph--company gravatar-text-truncate-1-line",n.className),linkUrl:n.linkToProfile?a.profile_url:"",text:a.company}):""}function A(a,r,n={}){return a.location?s(t.PARAGRAPH,e.LOCATION,r,{className:l("gravatar-block-paragraph--location gravatar-text-truncate-1-line",n.className),linkUrl:n.linkToProfile?a.profile_url:"",text:a.location}):""}function p(a,r,n={}){return a.description?s(t.PARAGRAPH,e.DESCRIPTION,r,{className:l("gravatar-block-paragraph--description gravatar-text-truncate-2-lines",n.className),linkUrl:n.linkToProfile?a.profile_url:"",text:a.description}):""}function _(a,r){return[{url:a.profile_url,service_type:"gravatar",service_icon:"https://secure.gravatar.com/icons/gravatar.svg",service_label:"Gravatar",is_hidden:!1},...a.verified_accounts||[]].map((a=>a.is_hidden?null:s(t.IMAGE,a.service_type,r,{linkUrl:a.url,imageUrl:a.service_icon,imageWidth:32,imageHeight:32,imageAlt:a.service_label})))}function m(r,n,i){return r.profile_url?s(t.LINK,e.VIEW_PROFILE,n,{className:l("gravatar-block-link--align-right",i),linkUrl:r.profile_url,text:(0,a.__)("View profile â†’","gravatar-enhanced")}):""}window.React;const f=(a,r)=>`\n\t${s(t.GROUP,e.HEADER,r,{className:"gravatar-block-group--header gravatar-block-group--align-center"},[g(a,r,72,72),s(t.GROUP,e.JOB_COMPANY_LOCATION_WRAPPER,r,{linkUrl:a.profile_url,verticalAlignment:!0},[u(a,r),s(t.GROUP,e.JOB_COMPANY_WRAPPER,r,{className:"gravatar-block-group--comma-separated"},[v(a,r),d(a,r)]),A(a,r)])])}\n\t${p(a,r)}\n\t${s(t.GROUP,e.FOOTER,r,{className:"gravatar-block-group--footer gravatar-block-group--align-center"},[..._(a,r),m(a,r)])}\n`,k=(a,r)=>`\n\t${g(a,r,354,354)}\n\t${u(a,r,{linkToProfile:!0})}\n\t${v(a,r,{linkToProfile:!0})}\n\t${A(a,r,{linkToProfile:!0})}\n\t${p(a,r,{className:"gravatar-text-truncate-3-lines"})}\n\t${s(t.GROUP,e.VERIFIED_ACCOUNTS,r,{className:"gravatar-block-group--verified-accounts"},_(a,r))}\n`;document.addEventListener("DOMContentLoaded",(()=>{document.querySelectorAll(".gravatar-block").forEach((async t=>{const{layout:e,avatarUrlSizeParam:n,placeholderProfile:l,hashedEmail:o="",deletedElements:c={}}=JSON.parse(t.dataset.attrs);let s=f,g=72;switch(e){case r.PORTRAIT:s=k,g=354;case r.LANDSCAPE:case r.LINE:}if(t.innerHTML=s(l,c),!t.dataset.attrs)return void(t.innerHTML+=`\n\t\t\t\t<div class="gravatar-block__status">${(0,a.__)("Oops! Something went wrong","gravatar-enhanced")}</div>\n\t\t\t`);const{errorCode:u,errorMsg:v,data:d}=await async function(r){try{const a="gravatar-block",t=(0,i.addQueryArgs)(`https://api.gravatar.com/v3/profiles/${r}`,{source:a}),e=await fetch(t);if(200!==e.status)throw e.status;const n=await e.json(),l=(0,i.addQueryArgs)(n.profile_url,{utm_source:a});return{data:{...n,profile_url:l}}}catch(r){let t=(0,a.__)("Sorry, we are unable to load this Gravatar profile.","gravatar-enhanced");switch(r){case 404:t=(0,a.__)("Profile not found.","gravatar-enhanced");break;case 429:t=(0,a.__)("Too many requests.","gravatar-enhanced");break;case 500:t=(0,a.__)("Internal server error.","gravatar-enhanced")}return{errorCode:r,errorMsg:t}}}(o);var A,p;u?t.innerHTML+=`\n\t\t\t\t<div class="gravatar-block__status">${v}</div>\n\t\t\t`:(d.avatar_url=(A=d.avatar_url,p=n||g,(0,i.addQueryArgs)(A,{s:2*p})),t.innerHTML=s(d,c))}))}))})();