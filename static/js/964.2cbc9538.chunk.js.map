{"version":3,"file":"static/js/964.2cbc9538.chunk.js","mappings":"2IAAO,MAAMA,EAAa,CACxBC,KAAM,SACNC,KAAM,mBAENC,WAAaC,IACXA,EAAQC,kBAAkB,MAC1BD,EAAQE,kBAAkB,MAC1BF,EAAQG,gBAAgB,MACxBH,EAAQI,kBAAkB,KAG5BC,cAAeA,CAACL,EAASM,KACvB,MAAM,YAAEC,EAAW,YAAEC,GAAgBR,EAG/BS,EAAoBF,EAAYD,GAEtC,GAAIG,EAIF,OAFAT,EAAQU,eAAeD,QACvBT,EAAQW,kBAAkBL,GAKvBE,IACHR,EAAQE,kBAAkBI,GAC1BN,EAAQG,gBAAgBG,GACxBN,EAAQI,kBAAkB,MAI9BQ,eAAgBA,CAACZ,EAASM,KACxB,MAAM,UAAEO,EAAS,eAAEC,EAAc,eAAEC,EAAc,YAAEP,GAAgBR,EAEnE,GAAKa,EAAL,CAGA,GAAuB,OAAnBE,GAA2BP,EAAa,CAC1C,MAAMQ,EAAWC,KAAKC,MAAMH,EAAiB,KACvCI,EAAWJ,EAAiB,IAG5BK,EAFaH,KAAKC,MAAMZ,EAAa,KAEbU,EACxBK,EAFaf,EAAa,IAEFa,EAI9B,OAFAnB,EAAQsB,UAAUd,EAAaY,EAAUC,QACzCrB,EAAQW,kBAAkBL,EAE5B,CAGuB,OAAnBQ,GACFd,EAAQG,gBAAgBG,EAlBJ,GAsBxBiB,YAAcvB,IACZ,MAAM,eAAEc,EAAc,aAAEU,GAAiBxB,EAGzC,GAAuB,OAAnBc,GAA4C,OAAjBU,EAAuB,CACpD,MAAMC,EAAWzB,EAAQ0B,qBACzB1B,EAAQI,kBAAkBqB,EAC5B,CAGAzB,EAAQW,kBAAkB,OAI5BgB,WAAa3B,IACX,MAAM,eAAEc,EAAc,aAAEU,EAAY,eAAEI,GAAmB5B,EAGzD,GAAI4B,EAAeC,OAAS,EAC1B,OAAOD,EAAeE,IAAIC,IAAK,CAAOA,QAAOC,KAAM,eAIrD,GAAuB,OAAnBlB,GAA4C,OAAjBU,EAAuB,CAEpD,OADaxB,EAAQiC,wBACTH,IAAIC,IAAK,CAAOA,QAAOC,KAAM,sBAC3C,CAEA,MAAO,I","sources":["tools/selectTool.js"],"sourcesContent":["export const selectTool = {\n  name: 'select',\n  icon: 'fa-vector-square',\n  \n  onActivate: (context) => {\n    context.setLineStartPixel(null);\n    context.setSelectionStart(null);\n    context.setSelectionEnd(null);\n    context.setSelectedPixels([]);\n  },\n  \n  onPointerDown: (context, pixelIndex) => {\n    const { pixelGroups, activeGroup } = context;\n    \n    // Check if clicking on a grouped pixel\n    const clickedPixelGroup = pixelGroups[pixelIndex];\n    \n    if (clickedPixelGroup) {\n      // Start dragging the group\n      context.setActiveGroup(clickedPixelGroup);\n      context.setGroupDragStart(pixelIndex);\n      return;\n    }\n    \n    // Start new selection if not clicking on a group\n    if (!activeGroup) {\n      context.setSelectionStart(pixelIndex);\n      context.setSelectionEnd(pixelIndex);\n      context.setSelectedPixels([]);\n    }\n  },\n  \n  onPointerEnter: (context, pixelIndex) => {\n    const { isDrawing, selectionStart, groupDragStart, activeGroup } = context;\n    \n    if (!isDrawing) return;\n    \n    // Handle group dragging\n    if (groupDragStart !== null && activeGroup) {\n      const startRow = Math.floor(groupDragStart / 200);\n      const startCol = groupDragStart % 200;\n      const currentRow = Math.floor(pixelIndex / 200);\n      const currentCol = pixelIndex % 200;\n      const deltaRow = currentRow - startRow;\n      const deltaCol = currentCol - startCol;\n      \n      context.moveGroup(activeGroup, deltaRow, deltaCol);\n      context.setGroupDragStart(pixelIndex);\n      return;\n    }\n    \n    // Handle selection rectangle\n    if (selectionStart !== null) {\n      context.setSelectionEnd(pixelIndex);\n    }\n  },\n  \n  onPointerUp: (context) => {\n    const { selectionStart, selectionEnd } = context;\n    \n    // Finalize selection\n    if (selectionStart !== null && selectionEnd !== null) {\n      const selected = context.getSelectionPixels();\n      context.setSelectedPixels(selected);\n    }\n    \n    // Clear group drag\n    context.setGroupDragStart(null);\n  },\n  \n  // Get preview rectangle during selection\n  getPreview: (context) => {\n    const { selectionStart, selectionEnd, selectedPixels } = context;\n    \n    // Show final selection if complete\n    if (selectedPixels.length > 0) {\n      return selectedPixels.map(index => ({ index, type: 'selection' }));\n    }\n    \n    // Show preview rectangle during drag\n    if (selectionStart !== null && selectionEnd !== null) {\n      const rect = context.getSelectionRectangle();\n      return rect.map(index => ({ index, type: 'selection-preview' }));\n    }\n    \n    return [];\n  }\n};\n"],"names":["selectTool","name","icon","onActivate","context","setLineStartPixel","setSelectionStart","setSelectionEnd","setSelectedPixels","onPointerDown","pixelIndex","pixelGroups","activeGroup","clickedPixelGroup","setActiveGroup","setGroupDragStart","onPointerEnter","isDrawing","selectionStart","groupDragStart","startRow","Math","floor","startCol","deltaRow","deltaCol","moveGroup","onPointerUp","selectionEnd","selected","getSelectionPixels","getPreview","selectedPixels","length","map","index","type","getSelectionRectangle"],"ignoreList":[],"sourceRoot":""}