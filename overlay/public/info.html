<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Stream Info Overlay</title>
<link rel="stylesheet" href="/overlay/css/overlay.css">
<style>
  body {
    display: flex;
    align-items: flex-end;
    justify-content: flex-start;
    height: 100vh;
    padding: 16px 20px;
  }

  #info-bar {
    display: flex;
    align-items: center;
    gap: 16px;
    padding: 10px 18px;
    background: rgba(0,0,0,0.80);
    border-radius: var(--border-r);
    border: 1px solid rgba(131,189,200,0.3);
    backdrop-filter: blur(4px);
    max-width: 700px;
  }

  #logo {
    width: 36px;
    height: 36px;
    border-radius: 50%;
    flex-shrink: 0;
    overflow: hidden;
    animation: pulse 3s infinite;
  }

  #logo img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
  }

  #title {
    font-size: 15px;
    font-weight: 600;
    color: var(--white);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 380px;
  }

  #game {
    font-size: 12px;
    color: var(--teal);
    margin-top: 2px;
  }

  .sep {
    width: 1px;
    height: 32px;
    background: rgba(255,255,255,0.15);
    flex-shrink: 0;
  }

  #timer {
    font-size: 15px;
    font-weight: 700;
    color: var(--rose);
    font-variant-numeric: tabular-nums;
    flex-shrink: 0;
    letter-spacing: 1px;
  }

  #live-badge {
    background: #e62020;
    color: #fff;
    font-size: 11px;
    font-weight: 700;
    padding: 3px 8px;
    border-radius: 4px;
    letter-spacing: 1.5px;
    flex-shrink: 0;
    animation: pulse 2s infinite;
  }
</style>
</head>
<body>
<div id="info-bar">
  <div id="logo"><img src="https://belonging.lgbt/uploads/1771303051763-935131023.png" alt="Eve"></div>
  <div>
    <div id="title">evepanzarino</div>
    <div id="game">Live</div>
  </div>
  <div class="sep"></div>
  <div id="timer">00:00:00</div>
  <div class="sep"></div>
  <div id="live-badge">LIVE</div>
</div>

<script>
  const titleEl = document.getElementById('title');
  const gameEl  = document.getElementById('game');
  const timerEl = document.getElementById('timer');

  // Uptime timer
  const startTime = Date.now();
  setInterval(() => {
    const s = Math.floor((Date.now() - startTime) / 1000);
    const h = String(Math.floor(s / 3600)).padStart(2,'0');
    const m = String(Math.floor((s % 3600) / 60)).padStart(2,'0');
    const sec = String(s % 60).padStart(2,'0');
    timerEl.textContent = `${h}:${m}:${sec}`;
  }, 1000);

  // WebSocket updates
  const WS_URL = `${location.protocol === 'https:' ? 'wss' : 'ws'}://${location.host}/overlay`;
  let ws;

  function connect() {
    ws = new WebSocket(WS_URL);
    ws.onmessage = e => {
      const data = JSON.parse(e.data);
      if (data.event !== 'info') return;
      if (data.title) titleEl.textContent = data.title;
      if (data.game)  gameEl.textContent  = data.game;
    };
    ws.onclose = () => setTimeout(connect, 2000);
    ws.onerror = () => ws.close();
  }

  connect();
</script>
</body>
</html>
