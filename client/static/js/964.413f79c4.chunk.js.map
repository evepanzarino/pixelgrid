{"version":3,"file":"static/js/964.413f79c4.chunk.js","mappings":"2IAAO,MAAMA,EAAa,CACxBC,KAAM,SACNC,KAAM,mBAENC,WAAaC,IACXA,EAAQC,kBAAkB,MAC1BD,EAAQE,kBAAkB,MAC1BF,EAAQG,gBAAgB,MACxBH,EAAQI,kBAAkB,KAG5BC,cAAeA,CAACL,EAASM,KACvB,MAAM,YAAEC,EAAW,YAAEC,EAAW,eAAEC,EAAc,KAAEC,GAASV,EACrDW,EAAWD,EAAKE,GAAK,KAGrBC,EAAoBN,EAAYD,GAEtC,GAAIO,EAKF,OAHAb,EAAQc,eAAeD,GACvBb,EAAQe,kBAAkBT,QAC1BN,EAAQgB,cAAa,GAKvB,IAAIL,GAAaH,EAmBZA,GAAgBG,IACnBX,EAAQE,kBAAkBI,GAC1BN,EAAQG,gBAAgBG,GACxBN,EAAQI,kBAAkB,IAC1BJ,EAAQgB,cAAa,SAtBrB,GAAuB,OAAnBP,EAEFT,EAAQE,kBAAkBI,GAC1BN,EAAQG,gBAAgB,MACxBH,EAAQI,kBAAkB,QAErB,CAELJ,EAAQG,gBAAgBG,GACxB,MAAMW,EAAWjB,EAAQkB,mBAAmBlB,EAAQS,eAAgBH,GACpEN,EAAQI,kBAAkBa,GAC1BjB,EAAQE,kBAAkB,MAC1BF,EAAQG,gBAAgB,KAC1B,GAaJgB,eAAgBA,CAACnB,EAASM,KACxB,MAAM,UAAEc,EAAS,eAAEX,EAAc,eAAEY,EAAc,YAAEb,EAAW,KAAEE,GAASV,EACnEW,EAAWD,EAAKE,GAAK,KAE3B,GAAKQ,EAAL,CASA,GAAuB,OAAnBC,GAA2Bb,EAAa,CAC1C,MAAMc,EAAWC,KAAKC,MAAMH,EAAiB,KACvCI,EAAWJ,EAAiB,IAG5BK,EAFaH,KAAKC,MAAMlB,EAAa,KAEbgB,EACxBK,EAFarB,EAAa,IAEFmB,EAI9B,OAFAzB,EAAQ4B,UAAUpB,EAAakB,EAAUC,QACzC3B,EAAQe,kBAAkBT,EAE5B,CAGuB,OAAnBG,GAA4BE,GAC9BX,EAAQG,gBAAgBG,EAlB1B,MAJMK,GAA+B,OAAnBF,GACdT,EAAQG,gBAAgBG,IAyB9BuB,YAAc7B,IACZ,MAAM,eAAES,EAAc,aAAEqB,EAAY,KAAEpB,GAASV,EAI/C,KAHiBU,EAAKE,GAAK,OAGS,OAAnBH,GAA4C,OAAjBqB,EAAuB,CACjE,MAAMb,EAAWjB,EAAQkB,mBAAmBT,EAAgBqB,GAC5D9B,EAAQI,kBAAkBa,GAC1BjB,EAAQE,kBAAkB,MAC1BF,EAAQG,gBAAgB,KAC1B,CAGAH,EAAQe,kBAAkB,OAI5BgB,WAAa/B,IACX,MAAM,eAAES,EAAc,aAAEqB,EAAY,eAAEE,EAAc,KAAEtB,GAASV,EACzDW,EAAWD,EAAKE,GAAK,KAG3B,GAAIoB,EAAeC,OAAS,EAC1B,OAAOD,EAAeE,IAAIC,IAAK,CAAOA,QAAOC,KAAM,eAIrD,GAAuB,OAAnB3B,GAA4C,OAAjBqB,EAAuB,CAEpD,OADa9B,EAAQqC,sBAAsB5B,EAAgBqB,GAC/CI,IAAIC,IAAK,CAAOA,QAAOC,KAAM,sBAC3C,CAGA,OAAIzB,GAA+B,OAAnBF,GAA4C,OAAjBqB,EAClC,CAAC,CAAEK,MAAO1B,EAAgB2B,KAAM,oBAGlC,I","sources":["tools/selectTool.js"],"sourcesContent":["export const selectTool = {\n  name: 'select',\n  icon: 'fa-vector-square',\n  \n  onActivate: (context) => {\n    context.setLineStartPixel(null);\n    context.setSelectionStart(null);\n    context.setSelectionEnd(null);\n    context.setSelectedPixels([]);\n  },\n  \n  onPointerDown: (context, pixelIndex) => {\n    const { pixelGroups, activeGroup, selectionStart, size } = context;\n    const isMobile = size.w <= 1024;\n    \n    // Check if clicking on a grouped pixel\n    const clickedPixelGroup = pixelGroups[pixelIndex];\n    \n    if (clickedPixelGroup) {\n      // Start dragging the group\n      context.setActiveGroup(clickedPixelGroup);\n      context.setGroupDragStart(pixelIndex);\n      context.setIsDrawing(true);\n      return;\n    }\n    \n    // Mobile two-click selection mode\n    if (isMobile && !activeGroup) {\n      if (selectionStart === null) {\n        // First click: set selection start\n        context.setSelectionStart(pixelIndex);\n        context.setSelectionEnd(null);\n        context.setSelectedPixels([]);\n        // Don't set drawing state for mobile mode\n      } else {\n        // Second click: finalize selection\n        context.setSelectionEnd(pixelIndex);\n        const selected = context.getSelectionPixels(context.selectionStart, pixelIndex);\n        context.setSelectedPixels(selected);\n        context.setSelectionStart(null);\n        context.setSelectionEnd(null);\n      }\n      return;\n    }\n    \n    // Desktop drag selection mode\n    if (!activeGroup && !isMobile) {\n      context.setSelectionStart(pixelIndex);\n      context.setSelectionEnd(pixelIndex);\n      context.setSelectedPixels([]);\n      context.setIsDrawing(true);\n    }\n  },\n  \n  onPointerEnter: (context, pixelIndex) => {\n    const { isDrawing, selectionStart, groupDragStart, activeGroup, size } = context;\n    const isMobile = size.w <= 1024;\n    \n    if (!isDrawing) {\n      // On mobile, show preview rectangle when hovering after first click\n      if (isMobile && selectionStart !== null) {\n        context.setSelectionEnd(pixelIndex);\n      }\n      return;\n    }\n    \n    // Handle group dragging\n    if (groupDragStart !== null && activeGroup) {\n      const startRow = Math.floor(groupDragStart / 200);\n      const startCol = groupDragStart % 200;\n      const currentRow = Math.floor(pixelIndex / 200);\n      const currentCol = pixelIndex % 200;\n      const deltaRow = currentRow - startRow;\n      const deltaCol = currentCol - startCol;\n      \n      context.moveGroup(activeGroup, deltaRow, deltaCol);\n      context.setGroupDragStart(pixelIndex);\n      return;\n    }\n    \n    // Handle desktop selection rectangle during drag\n    if (selectionStart !== null && !isMobile) {\n      context.setSelectionEnd(pixelIndex);\n    }\n  },\n  \n  onPointerUp: (context) => {\n    const { selectionStart, selectionEnd, size } = context;\n    const isMobile = size.w <= 1024;\n    \n    // Desktop drag selection completion\n    if (!isMobile && selectionStart !== null && selectionEnd !== null) {\n      const selected = context.getSelectionPixels(selectionStart, selectionEnd);\n      context.setSelectedPixels(selected);\n      context.setSelectionStart(null);\n      context.setSelectionEnd(null);\n    }\n    \n    // Clear group drag\n    context.setGroupDragStart(null);\n  },\n  \n  // Get preview rectangle during selection\n  getPreview: (context) => {\n    const { selectionStart, selectionEnd, selectedPixels, size } = context;\n    const isMobile = size.w <= 1024;\n    \n    // Show final selection if complete\n    if (selectedPixels.length > 0) {\n      return selectedPixels.map(index => ({ index, type: 'selection' }));\n    }\n    \n    // Show preview rectangle during drag or mobile hover\n    if (selectionStart !== null && selectionEnd !== null) {\n      const rect = context.getSelectionRectangle(selectionStart, selectionEnd);\n      return rect.map(index => ({ index, type: 'selection-preview' }));\n    }\n    \n    // Show mobile first click indicator\n    if (isMobile && selectionStart !== null && selectionEnd === null) {\n      return [{ index: selectionStart, type: 'selection-start' }];\n    }\n    \n    return [];\n  }\n};\n"],"names":["selectTool","name","icon","onActivate","context","setLineStartPixel","setSelectionStart","setSelectionEnd","setSelectedPixels","onPointerDown","pixelIndex","pixelGroups","activeGroup","selectionStart","size","isMobile","w","clickedPixelGroup","setActiveGroup","setGroupDragStart","setIsDrawing","selected","getSelectionPixels","onPointerEnter","isDrawing","groupDragStart","startRow","Math","floor","startCol","deltaRow","deltaCol","moveGroup","onPointerUp","selectionEnd","getPreview","selectedPixels","length","map","index","type","getSelectionRectangle"],"ignoreList":[],"sourceRoot":""}